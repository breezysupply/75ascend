---
import Layout from '../layouts/Layout.astro';
import History from '../components/History';
import { initializeApp } from '../utils/firebaseConfig';

// Initialize Firebase
initializeApp();
---

<Layout title="History - 75 ASCEND">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-6">Challenge History</h1>
    <History client:load />
  </div>

  <script>
    const isDevelopment = import.meta.env.DEV || process.env.NODE_ENV === 'development';
    
    if (!isDevelopment) {
      const { getAuth, onAuthStateChanged } = await import('firebase/auth');
      
      const auth = getAuth();
      onAuthStateChanged(auth, (user) => {
        if (!user) {
          window.location.href = '/login';
        }
      });
    }
  </script>
</Layout> 